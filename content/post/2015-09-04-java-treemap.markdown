title: Java TreeMap æºç è§£æ
date: 2015-09-04 19:54:55
categories: [ç¼–ç¨‹è¯­è¨€]
tags: [Java]
---

ç»§[ä¸Šç¯‡æ–‡ç« ](/blog/2015/09/03/java-hashmap/)ä»‹ç»å®Œäº†HashMapï¼Œè¿™ç¯‡æ–‡ç« å¼€å§‹ä»‹ç»Mapç³»åˆ—å¦ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»[TreeMap](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/TreeMap.html)ã€‚
å¤§å®¶ä¹Ÿè®¸èƒ½æ„Ÿè§‰åˆ°ï¼Œç½‘ç»œä¸Šä»‹ç»HashMapçš„æ–‡ç« æ¯”è¾ƒå¤šï¼Œä½†æ˜¯ä»‹ç»TreeMapåè€Œä¸é‚£ä¹ˆå¤šï¼Œè¿™é‡Œé¢æ˜¯æœ‰åŸå› ï¼šä¸€æ–¹é¢HashMapçš„ä½¿ç”¨åœºæ™¯æ¯”è¾ƒå¤šï¼›äºŒæ˜¯ç›¸å¯¹äºHashMapæ¥è¯´ï¼ŒTreeMapæ‰€ç”¨åˆ°çš„æ•°æ®ç»“æ„æ›´ä¸ºå¤æ‚ã€‚

> æœ¬æ–‡æºç åˆ†æåŸºäº[Oracle JDK 1.7.0_71](http://www.oracle.com/technetwork/java/javase/7u71-relnotes-2296187.html)ï¼Œè¯·çŸ¥æ‚‰ã€‚
```
$ java -version
java version "1.7.0_71"
Java(TM) SE Runtime Environment (build 1.7.0_71-b14)
Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)
```

## ç­¾åï¼ˆsignatureï¼‰
```
public class TreeMap<K,V>
       extends AbstractMap<K,V>
       implements NavigableMap<K,V>, Cloneable, java.io.Serializable
```
å¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”HashMapæ¥è¯´ï¼ŒTreeMapå¤šç»§æ‰¿äº†ä¸€ä¸ªæ¥å£[NavigableMap](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html)ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ¥å£ï¼Œå†³å®šäº†TreeMapä¸HashMapçš„ä¸åŒï¼š
> HashMapçš„keyæ˜¯æ— åºçš„ï¼ŒTreeMapçš„keyæ˜¯æœ‰åºçš„

### æ¥å£NavigableMap
é¦–å…ˆçœ‹ä¸‹NavigableMapçš„ç­¾å
```
public interface NavigableMap<K,V> extends SortedMap<K,V>
```
å‘ç°NavigableMapç»§æ‰¿äº†SortedMapï¼Œå†çœ‹SortedMapçš„ç­¾å

#### `SortedMap`
```
public interface SortedMap<K,V> extends Map<K,V>
```
`SortedMap`å°±åƒå…¶åå­—é‚£æ ·ï¼Œè¯´æ˜è¿™ä¸ªMapæ˜¯æœ‰åºçš„ã€‚è¿™ä¸ªé¡ºåºä¸€èˆ¬æ˜¯æŒ‡ç”±[Comparableæ¥å£](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)æä¾›çš„keysçš„è‡ªç„¶åºï¼ˆnatural orderingï¼‰ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºSortedMapå®ä¾‹æ—¶ï¼ŒæŒ‡å®šä¸€ä¸ª[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)æ¥å†³å®šã€‚
å½“æˆ‘ä»¬åœ¨ç”¨é›†åˆè§†è§’ï¼ˆcollection viewsï¼Œä¸HashMapä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”±entrySetã€keySetä¸valuesæ–¹æ³•æä¾›ï¼‰æ¥è¿­ä»£ï¼ˆiterateï¼‰ä¸€ä¸ªSortedMapå®ä¾‹æ—¶ä¼šä½“ç°å‡ºkeyçš„é¡ºåºã€‚

è¿™é‡Œå¼•ç”³ä¸‹å…³äºComparableä¸Comparatorçš„åŒºåˆ«ï¼ˆå‚è€ƒ[è¿™é‡Œ](http://stackoverflow.com/a/4108616/2163429)ï¼‰ï¼š
- Comparableä¸€èˆ¬è¡¨ç¤ºç±»çš„è‡ªç„¶åºï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ªStudentç±»ï¼Œå­¦å·ä¸ºé»˜è®¤æ’åº
- Comparatorä¸€èˆ¬è¡¨ç¤ºç±»åœ¨æŸç§åœºåˆä¸‹çš„ç‰¹æ®Šåˆ†ç±»ï¼Œéœ€è¦å®šåˆ¶åŒ–æ’åºã€‚æ¯”å¦‚ç°åœ¨æƒ³æŒ‰ç…§Studentç±»çš„ageæ¥æ’åº

æ’å…¥SortedMapä¸­çš„keyçš„ç±»ç±»éƒ½å¿…é¡»ç»§æ‰¿Comparableç±»ï¼ˆæˆ–æŒ‡å®šä¸€ä¸ªcomparatorï¼‰ï¼Œè¿™æ ·æ‰èƒ½ç¡®å®šå¦‚ä½•æ¯”è¾ƒï¼ˆé€šè¿‡`k1.compareTo(k2)`æˆ–`comparator.compare(k1, k2)`ï¼‰ä¸¤ä¸ªkeyï¼Œå¦åˆ™ï¼Œåœ¨æ’å…¥æ—¶ï¼Œä¼šæŠ¥`ClassCastException`çš„å¼‚å¸¸ã€‚

æ­¤ä¸ºï¼ŒSortedMapä¸­keyçš„é¡ºåºæ€§åº”è¯¥ä¸`equals`æ–¹æ³•ä¿æŒä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´`k1.compareTo(k2)`æˆ–`comparator.compare(k1, k2)`ä¸ºtrueæ—¶ï¼Œ`k1.equals(k2)`ä¹Ÿåº”è¯¥ä¸ºtrueã€‚

ä»‹ç»å®Œäº†SortedMapï¼Œå†æ¥å›åˆ°æˆ‘ä»¬çš„NavigableMapä¸Šé¢æ¥ã€‚
NavigableMapæ˜¯JDK1.6æ–°å¢çš„ï¼Œåœ¨SortedMapçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€äº›â€œå¯¼èˆªæ–¹æ³•â€ï¼ˆnavigation methodsï¼‰æ¥è¿”å›ä¸æœç´¢ç›®æ ‡æœ€è¿‘çš„å…ƒç´ ã€‚ä¾‹å¦‚ä¸‹é¢è¿™äº›æ–¹æ³•ï¼š
- lowerEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå°çš„å…ƒç´ 
- floorEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå°æˆ–ç›¸ç­‰çš„å…ƒç´ 
- ceilingEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå¤§æˆ–ç›¸ç­‰çš„å…ƒç´ 
- higherEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå¤§çš„å…ƒç´ 

## è®¾è®¡ç†å¿µï¼ˆdesign conceptï¼‰

### [çº¢é»‘æ ‘ï¼ˆRedâ€“black treeï¼‰](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)

TreeMapæ˜¯ç”¨çº¢é»‘æ ‘ä½œä¸ºåŸºç¡€å®ç°çš„ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€ç§[äºŒå‰æœç´¢æ ‘](https://en.wikipedia.org/wiki/Binary_search_tree)ï¼Œè®©æˆ‘ä»¬åœ¨ä¸€èµ·å›å¿†ä¸‹äºŒå‰æœç´¢æ ‘çš„ä¸€äº›æ€§è´¨

#### äºŒå‰æœç´¢æ ‘

å…ˆçœ‹çœ‹äºŒå‰æœç´¢æ ‘ï¼ˆbinary search treeï¼ŒBSTï¼‰é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ
<center>
<img src="https://img.alicdn.com/imgextra/i3/581166664/TB2R1QoeVXXXXaBXpXXXXXXXXXX_!!581166664.png" alt="äºŒå‰æœç´¢æ ‘" />
</center>
ç›¸ä¿¡å¤§å®¶å¯¹è¿™ä¸ªå›¾éƒ½ä¸é™Œç”Ÿï¼Œå…³é”®ç‚¹æ˜¯ï¼š
> å·¦å­æ ‘çš„å€¼å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„å€¼å¤§äºæ ¹èŠ‚ç‚¹ã€‚

äºŒå‰æœç´¢æ ‘çš„ä¼˜åŠ¿åœ¨äºæ¯è¿›è¡Œä¸€æ¬¡åˆ¤æ–­å°±æ˜¯èƒ½å°†é—®é¢˜çš„è§„æ¨¡å‡å°‘ä¸€åŠï¼Œæ‰€ä»¥å¦‚æœäºŒå‰æœç´¢æ ‘æ˜¯å¹³è¡¡çš„è¯ï¼ŒæŸ¥æ‰¾å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º`log(n)`ï¼Œä¹Ÿå°±æ˜¯æ ‘çš„é«˜åº¦ã€‚

æˆ‘è¿™é‡Œæƒ³åˆ°ä¸€ä¸ªæ¯”è¾ƒä¸¥è‚ƒçš„é—®é¢˜ï¼Œå¦‚æœè¯´äºŒå‰æœç´¢æ ‘å°†é—®é¢˜è§„æ¨¡å‡å°‘äº†ä¸€åŠï¼Œé‚£ä¹ˆä¸‰å‰æœç´¢æ ‘ä¸å°±å°†é—®é¢˜è§„æ¨¡å‡å°‘äº†ä¸‰åˆ†ä¹‹äºŒï¼Œè¿™ä¸æ˜¯æ›´å¥½å˜›ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰å››å‰æœç´¢æ ‘ï¼Œäº”å‰æœç´¢æ ‘......å¯¹äºæ›´ä¸€èˆ¬çš„æƒ…å†µï¼š
> nä¸ªå…ƒç´ ï¼ŒKå‰æ ‘æœç´¢æ ‘çš„Kä¸ºå¤šå°‘æ—¶æ•ˆç‡æ˜¯æœ€å¥½çš„ï¼ŸKï¼2æ—¶å—ï¼Ÿ

#### K å‰æœç´¢æ ‘

å¦‚æœå¤§å®¶æŒ‰ç…§æˆ‘ä¸Šé¢åˆ†æï¼Œå¾ˆå¯èƒ½ä¹Ÿé™·å…¥ä¸€ä¸ªè¯¯åŒºï¼Œå°±æ˜¯
> ä¸‰å‰æœç´¢æ ‘åœ¨å°†é—®é¢˜è§„æ¨¡å‡å°‘ä¸‰åˆ†ä¹‹äºŒæ—¶ï¼Œæ‰€éœ€æ¯”è¾ƒæ“ä½œçš„æ¬¡æ•°æ˜¯ä¸¤æ¬¡ï¼ˆäºŒå‰æœç´¢æ ‘å†å°†é—®é¢˜è§„æ¨¡å‡å°‘ä¸€åŠæ—¶ï¼Œåªéœ€è¦ä¸€æ¬¡æ¯”è¾ƒæ“ä½œï¼‰

æˆ‘ä»¬ä¸èƒ½æŠŠè¿™ä¸¤æ¬¡ç»™å¿½ç•¥äº†ï¼Œå¯¹äºæ›´ä¸€èˆ¬çš„æƒ…å†µï¼š
> nä¸ªå…ƒç´ ï¼ŒKå‰æ ‘æœç´¢æ ‘éœ€è¦çš„å¹³å‡æ¯”è¾ƒæ¬¡æ•°ä¸º`k*log(n/k)`ã€‚

å¯¹äºæç«¯æƒ…å†µkï¼næ—¶ï¼ŒKå‰æ ‘å°±è½¬åŒ–ä¸ºäº†çº¿æ€§è¡¨äº†ï¼Œå¤æ‚åº¦ä¹Ÿå°±æ˜¯`O(n)`äº†ï¼Œå¦‚æœç”¨æ•°å­¦è§’åº¦æ¥è§£è¿™ä¸ªé—®é¢˜ï¼Œç›¸å½“äºï¼š
> nä¸ºå›ºå®šå€¼æ—¶ï¼Œkå–ä½•å€¼æ—¶ï¼Œ`k*log(n/k)`çš„å–å€¼æœ€å°ï¼Ÿ

`k*log(n/k)`æ ¹æ®å¯¹æ•°çš„è¿ç®—è§„åˆ™å¯ä»¥è½¬åŒ–ä¸º`ln(n)*k/ln(k)`ï¼Œ`ln(n)`ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥ç›¸å½“äºå–`k/ln(k)`çš„æå°å€¼ã€‚è¿™ä¸ªé—®é¢˜å¯¹äºå¤§ä¸€åˆšå­¦é«˜æ•°çš„äººæ¥è¯´å†ç®€å•ä¸è¿‡äº†ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥çœ‹ç»“æœğŸ˜Š
> å½“kï¼eæ—¶ï¼Œ`k/ln(k)`å–æœ€å°å€¼ã€‚

è‡ªç„¶æ•°eçš„å–å€¼å¤§çº¦ä¸º2.718å·¦å³ï¼Œå¯ä»¥çœ‹åˆ°äºŒå‰æ ‘åŸºæœ¬ä¸Šå°±æ˜¯è¿™æ ·æœ€ä¼˜è§£äº†ã€‚åœ¨Nodejsçš„REPLä¸­è¿›è¡Œä¸‹é¢çš„æ“ä½œ
```
function foo(k) {return k/Math.log(k);}
> foo(2)
2.8853900817779268
> foo(3)
2.730717679880512
> foo(4)
2.8853900817779268
> foo(5)
3.1066746727980594
```
è²Œä¼¼kï¼3æ—¶æ¯”kï¼2æ—¶å¾—åˆ°çš„ç»“æœè¿˜è¦å°ï¼Œé‚£ä¹Ÿå°±æ˜¯è¯´ä¸‰å‰æœç´¢æ ‘åº”è¯¥æ¯”äºŒå‰æœç´¢æ ‘æ›´å¥½äº›å‘€ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆäºŒå‰æ ‘æ›´æµè¡Œå‘¢ï¼Ÿåæ¥åœ¨ä¸‡èƒ½çš„stackoverflowä¸Šæ‰¾åˆ°äº†[ç­”æ¡ˆ](http://stackoverflow.com/questions/3498382/why-use-binary-search-if-theres-ternary-search/3525695#3525695)ï¼Œä¸»æ—¨å¦‚ä¸‹ï¼š
> ç°åœ¨çš„CPUå¯ä»¥é’ˆå¯¹äºŒé‡é€»è¾‘ï¼ˆbinary logicï¼‰çš„ä»£ç åšä¼˜åŒ–ï¼Œä¸‰é‡é€»è¾‘ä¼šè¢«åˆ†è§£ä¸ºå¤šä¸ªäºŒé‡é€»è¾‘ã€‚

è¿™æ ·ä¹Ÿå°±å¤§æ¦‚èƒ½ç†è§£ä¸ºä»€ä¹ˆäºŒå‰æ ‘è¿™ä¹ˆæµè¡Œäº†ï¼Œå°±æ˜¯å› ä¸ºè¿›è¡Œä¸€æ¬¡æ¯”è¾ƒæ“ä½œï¼Œæˆ‘ä»¬æœ€å¤šå¯ä»¥å°†é—®é¢˜è§„æ¨¡å‡å°‘ä¸€åŠã€‚

å¥½äº†è¿™é‡Œæ‰¯çš„æœ‰ç‚¹è¿œäº†ğŸ˜Šï¼Œæˆ‘ä»¬å†å›åˆ°çº¢é»‘æ ‘ä¸Šæ¥ã€‚

#### çº¢é»‘æ ‘æ€§è´¨

å…ˆçœ‹çœ‹çº¢é»‘æ ‘çš„æ ·å­ï¼š
<center>
    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2HIUMeVXXXXXzXXXXXXXXXXXX_!!581166664.png" alt="çº¢é»‘æ ‘ç¤ºä¾‹">
</center>
ä¸Šå›¾æ˜¯ä»wikiæˆªæ¥çš„ï¼Œéœ€è¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯ï¼š
> å¶å­èŠ‚ç‚¹ä¸ºä¸Šå›¾ä¸­çš„NILèŠ‚ç‚¹ï¼Œå›½å†…ä¸€äº›æ•™æä¸­æ²¡æœ‰è¿™ä¸ªNILèŠ‚ç‚¹ï¼Œæˆ‘ä»¬åœ¨ç”»å›¾æ—¶æœ‰æ—¶ä¹Ÿä¼šçœç•¥è¿™äº›NILèŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ˜ç¡®ï¼Œå½“æˆ‘ä»¬è¯´å¶å­èŠ‚ç‚¹æ—¶ï¼ŒæŒ‡çš„å°±æ˜¯è¿™äº›NILèŠ‚ç‚¹ã€‚

çº¢é»‘æ ‘é€šè¿‡ä¸‹é¢5æ¡è§„åˆ™ï¼Œä¿è¯äº†æ ‘æ˜¯å¹³è¡¡çš„ï¼š
1. æ ‘çš„èŠ‚ç‚¹åªæœ‰çº¢ä¸é»‘ä¸¤ç§é¢œè‰²
2. æ ¹èŠ‚ç‚¹ä¸ºé»‘è‰²çš„
3. å¶å­èŠ‚ç‚¹ä¸ºé»‘è‰²çš„
4. çº¢è‰²èŠ‚ç‚¹çš„å­—èŠ‚ç‚¹å¿…å®šæ˜¯é»‘è‰²çš„
5. ä»ä»»æ„ä¸€èŠ‚ç‚¹å‡ºå‘ï¼Œåˆ°å…¶åç»§çš„å¶å­èŠ‚ç‚¹çš„è·¯å¾„ä¸­ï¼Œé»‘è‰²èŠ‚ç‚¹çš„æ•°ç›®ç›¸åŒ

æ»¡è¶³äº†ä¸Šé¢5ä¸ªæ¡ä»¶åï¼Œå°±èƒ½å¤Ÿä¿è¯ï¼š`æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸ä¼šå¤§äºæ ¹èŠ‚ç‚¹åˆ°å¶å­æœ€çŸ­è·¯å¾„çš„2å€`ã€‚
å…¶å®è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œä¸»è¦æ˜¯ç”¨äº†æ€§è´¨4ä¸5ï¼Œè¿™é‡Œç®€å•è¯´ä¸‹ï¼š
> å‡è®¾æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹æœ€çŸ­çš„è·¯å¾„ä¸­ï¼Œé»‘è‰²èŠ‚ç‚¹æ•°ç›®ä¸ºBï¼Œé‚£ä¹ˆæ ¹æ®æ€§è´¨5ï¼Œæ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸­ï¼Œé»‘è‰²èŠ‚ç‚¹æ•°ç›®ä¹Ÿæ˜¯Bï¼Œæœ€é•¿çš„æƒ…å†µå°±æ˜¯æ¯ä¸¤ä¸ªé»‘è‰²èŠ‚ç‚¹ä¸­é—´æœ‰ä¸ªçº¢è‰²èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯çº¢é»‘ç›¸é—´çš„æƒ…å†µï¼‰ï¼Œæ‰€ä»¥çº¢è‰²èŠ‚ç‚¹æœ€å¤šä¸ºBï¼1ä¸ªã€‚è¿™æ ·å°±èƒ½è¯æ˜ä¸Šé¢çš„ç»“è®ºäº†ã€‚

#### çº¢é»‘æ ‘æ“ä½œ

<center>
    <img src="https://img.alicdn.com/imgextra/i1/581166664/TB2AkEOeVXXXXXvXXXXXXXXXXXX_!!581166664.png" alt="çº¢é»‘æ ‘æ—‹è½¬ç¤ºä¾‹ï¼ˆæ²¡æœ‰ç”»å‡ºNILèŠ‚ç‚¹ï¼‰">
</center>
å…³äºçº¢é»‘æ ‘çš„æ’å…¥ã€åˆ é™¤ã€å·¦æ—‹ã€å³æ—‹è¿™äº›æ“ä½œï¼Œæˆ‘è§‰å¾—æœ€å¥½å¯ä»¥åšåˆ°å¯è§†åŒ–ï¼Œæ–‡å­—è¡¨è¾¾æ¯”è¾ƒç¹çï¼Œæˆ‘è¿™é‡Œå°±ä¸åœ¨çŒ®ä¸‘äº†ï¼Œç½‘ä¸Šèƒ½æ‰¾åˆ°çš„ä¹Ÿæ¯”è¾ƒå¤šï¼Œåƒ[v_July_vçš„ã€Šæ•™ä½ é€å½»äº†è§£çº¢é»‘æ ‘ã€‹](http://blog.csdn.net/v_JULY_v/article/details/6105630)ã€‚æˆ‘è¿™é‡Œæ¨èä¸ª[swfæ•™å­¦è§†é¢‘](http://www.csanimated.com/animation.php?t=Red-black_tree)ï¼ˆè§†é¢‘ä¸ºè‹±æ–‡ï¼Œå¤§å®¶ä¸è¦å®³æ€•ï¼Œé‡ç‚¹æ˜¯çœ‹å›¾ğŸ˜Šï¼‰ï¼Œ7åˆ†é’Ÿå·¦å³ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒã€‚

è¿™é‡Œè¿˜æœ‰ä¸ªäº¤äº’å¼[çº¢é»‘æ ‘çš„å¯è§†åŒ–](https://www.cs.usfca.edu/~galles/visualization/RedBlack.html)ç½‘é¡µï¼Œå¤§å®¶å¯ä»¥ä¸Šå»è‡ªå·±æ“ä½œæ“ä½œï¼Œæ’å…¥å‡ ä¸ªèŠ‚ç‚¹ï¼Œåˆ é™¤å‡ ä¸ªèŠ‚ç‚¹ç©ç©ï¼Œçœ‹çœ‹å·¦æ—‹å³æ—‹æ˜¯æ€ä¹ˆç©çš„ã€‚

## æºç å‰–æ

ç”±äºçº¢é»‘æ ‘çš„æ“ä½œæˆ‘è¿™é‡Œä¸è¯´äº†ï¼Œæ‰€ä»¥è¿™é‡ŒåŸºæœ¬ä¸Šä¹Ÿå°±æ²¡ä»€ä¹ˆæºç å¯ä»¥è®²äº†ï¼Œå› ä¸ºè¿™é‡Œé¢é‡è¦çš„ç®—æ³•éƒ½æ˜¯`From CLR`ï¼Œè¿™é‡Œçš„CLRæ˜¯æŒ‡Cormen, Leiserson, Rivestï¼Œä»–ä»¬æ˜¯ç®—æ³•å¯¼è®ºçš„ä½œè€…ï¼Œä¹Ÿå°±æ˜¯è¯´TreeMapé‡Œé¢ç®—æ³•éƒ½æ˜¯å‚ç…§ç®—æ³•å¯¼è®ºçš„ä¼ªä»£ç ã€‚

å› ä¸ºçº¢é»‘æ ‘æ˜¯å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥å…¶putï¼ˆåŒ…å«updateæ“ä½œï¼‰ã€getã€removeçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º`log(n)`ã€‚


## æ€»ç»“

åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒTreeMapä¸HashMapçš„çš„å®ç°ç®—æ˜¯éƒ½ä»‹ç»å®Œäº†ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬å®ç°çš„ä¸åŒï¼Œå†³å®šäº†å®ƒä»¬åº”ç”¨åœºæ™¯çš„ä¸åŒï¼š
- TreeMapçš„keyæ˜¯æœ‰åºçš„ï¼Œå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º`O(log(n))`ï¼Œä¸ºäº†ä¿è¯çº¢é»‘æ ‘å¹³è¡¡ï¼Œåœ¨å¿…è¦æ—¶ä¼šè¿›è¡Œæ—‹è½¬
- HashMapçš„keyæ˜¯æ— åºçš„ï¼Œå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º`O(1)`ï¼Œä¸ºäº†åšåˆ°åŠ¨æ€æ‰©å®¹ï¼Œåœ¨å¿…è¦æ—¶ä¼šè¿›è¡Œresizeã€‚

å¦å¤–ï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰è§£é‡Šå…·ä½“ä»£ç ï¼Œéš¾å…æœ‰äº›æ ‡é¢˜å…šäº†ï¼Œè¯·å¤§å®¶è§è°…ï¼Œåé¢ç†è§£çš„æ›´æ·±åˆ»äº†å†æ¥å¡«å‘ã€‚ğŸ˜‚

## å‚è€ƒ

- http://stackoverflow.com/questions/21329662/explanation-of-red-black-tree-based-implementation-of-treemap-in-java
- http://javahungry.blogspot.com/2014/04/fail-fast-iterator-vs-fail-safe-iterator-difference-with-example-in-java.html
- https://en.wikipedia.org/wiki/Binary_search_tree
- https://en.wikipedia.org/wiki/Red%E2%80%93black_tree
